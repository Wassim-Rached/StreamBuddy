<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />

    <style>
      #local-video,
      #remote-video {
        width: 100%;
        max-height: 300px;
      }

      #videos {
        display: flex;
        gap: 20px;
      }
    </style>
  </head>
  <body>
    <div id="connection-status" class="alert alert-info text-center">idle</div>
    <div class="container mt-3">
      <div id="alerts-container"></div>
      <div class="alert alert-warning text-center mt-2" role="alert">
        Warning: Sharing your ID with others allows them to call you. Please
        only share your ID with trusted individuals to avoid unwanted calls and
        potential privacy breaches. Always verify the identity of the caller
        before answering.
      </div>
      <div class="form-group mb-3">
        <label for="my-id">My ID: </label>
        <div class="input-group">
          <input disabled type="text" class="form-control" id="my-id" />
          <button class="btn btn-outline-secondary" id="copy-btn" type="button">
            Copy Link
          </button>
        </div>
      </div>
      <div class="form-group mb-3">
        <label for="peer-id">Peer ID: </label>
        <input type="text" class="form-control" id="peer-id" />
      </div>
      <div class="d-flex gap-2 mb-2">
        <button disabled id="call-btn" class="btn btn-primary" onclick="call()">
          Call
        </button>
        <button
          disabled
          id="hangup-btn"
          class="btn btn-danger"
          onclick="hangup()"
        >
          Hangup
        </button>
        <button
          disabled
          id="mute-btn"
          class="btn btn-secondary"
          onclick="toggleMute()"
        >
          Mute
        </button>
      </div>
      <div class="form-group mb-3">
        <label for="share-select">Choose what to share:</label>
        <select class="form-select" id="share-select" onchange="toggleStream()">
          <option value="none">Nothing</option>
          <option value="camera">Camera</option>
          <option value="screen">Screen</option>
        </select>
      </div>
      <div id="videos" class="mt-4">
        <video
          id="local-video"
          class="border rounded"
          playsinline
          autoplay
          muted
        ></video>
        <video
          id="remote-video"
          class="border rounded"
          playsinline
          autoplay
        ></video>
        <video
          id="standby-video"
          style="display: none"
          playsinline
          autoplay
          loop
          muted
        >
          <source src="standBy.mp4" type="video/mp4" />
        </video>
      </div>
      <h3 class="mt-4">Incoming Calls</h3>
      <div id="calls"></div>
    </div>
    <script
      src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"
      defer
    ></script>
    <script src="main.js" defer></script>
  </body>
</html>

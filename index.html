<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="StreamBuddy: A simple and modern video calling application that allows users to share their camera or screen with others. Secure and user-friendly interface."
    />
    <meta name="author" content="Wassim Rached" />
    <title>StreamBuddy</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link rel="icon" href="icon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div id="connection-status" class="alert alert-info text-center mb-4">
      idle
    </div>
    <div class="container mt-4">
      <div id="alerts-container"></div>
      <div class="alert alert-warning text-center mb-4" role="alert">
        Warning: Sharing your ID with others allows them to call you. Please
        only share your ID with trusted individuals to avoid unwanted calls and
        potential privacy breaches. Always verify the identity of the caller
        before answering.
      </div>
      <div class="form-group mb-3">
        <label for="my-id" class="form-label">My ID: </label>
        <div class="input-group">
          <input disabled type="text" class="form-control" id="my-id" />
          <button
            class="btn btn-outline-secondary btn-custom"
            id="copy-btn"
            type="button"
          >
            Copy Link
          </button>
        </div>
      </div>
      <div class="form-group mb-3">
        <label for="peer-id" class="form-label">Peer ID: </label>
        <input type="text" class="form-control" id="peer-id" />
      </div>
      <div class="d-flex gap-2 mb-3">
        <button disabled id="call-btn" class="btn btn-primary btn-custom">
          Call
        </button>
        <button disabled id="hangup-btn" class="btn btn-danger btn-custom">
          Hangup
        </button>
        <button disabled id="mute-btn" class="btn btn-secondary btn-custom">
          Mute
        </button>
        <!-- <button
          onclick="toggleRemoteVideoFullScreen()"
          class="btn btn-secondary btn-custom"
        >
          Full Screen
        </button> -->
      </div>
      <div class="form-group mb-3">
        <label for="share-select" class="form-label"
          >Choose what to share:</label
        >
        <select class="form-select form-select-custom" id="share-select">
          <option value="none">Nothing</option>
          <option value="camera">Camera</option>
          <option value="screen">Screen</option>
        </select>
      </div>
      <div id="videos" class="d-flex gap-3 mt-4">
        <div class="video-container">
          <video id="local-video" playsinline autoplay muted></video>
        </div>
        <div class="video-container">
          <video id="remote-video" playsinline autoplay></video>
        </div>
      </div>
      <div class="chat-container mt-4">
        <div class="chat-box border rounded p-3 mb-3" id="chat-box">
          <!-- Example messages -->
        </div>
        <div class="input-group">
          <input
            disabled
            type="text"
            class="form-control"
            id="chat-message-input"
            placeholder="Type a message..."
          />
          <button disabled class="btn btn-primary" id="send-message-btn">
            Send
          </button>
        </div>
      </div>
      <div class="file-transfer-container mt-4 border rounded p-3 bg-light">
        <h4 class="mb-3">File Transfer</h4>
        <div class="input-group mb-3">
          <input type="file" id="file-input" class="form-control" />
          <button class="btn btn-success btn-custom" id="send-file-btn">
            Send File
          </button>
        </div>
        <div id="file-list" class="mt-3">
          <!-- File list items will go here -->
        </div>
      </div>
      <h3 class="mt-4">Incoming Calls</h3>
      <div id="calls" class="d-flex">
        <div class="alert alert-info text-center mt-3" role="alert">
          No incoming calls at the moment.
        </div>
      </div>
    </div>
    <footer class="bg-light text-center text-lg-start border-top mt-4">
      <div class="container p-4">
        <!-- Credits Section -->
        <div class="row">
          <div class="col-lg-6 col-md-12">
            <p class="text-muted mb-0">Â© 2024 Wassim Rached</p>
          </div>
          <!-- Links Section -->
          <div class="col-lg-6 col-md-12 text-lg-end">
            <a
              href="https://github.com/wassim-rached"
              class="btn btn-outline-dark btn-sm ms-2"
              target="_blank"
              title="GitHub"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-github"
                viewBox="0 0 16 16"
              >
                <path
                  d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.54 5.44 7.6.4.074.556-.174.556-.388v-1.36c-2.21.485-2.68-1.05-2.68-1.05-.36-.915-.88-1.16-.88-1.16-.72-.495.055-.485.055-.485.797.056 1.28.82 1.28.82.708 1.2 1.855.854 2.31.654.06-.514.277-.854.503-1.051-1.772-.203-3.632-.886-3.632-3.947 0-.873.31-1.585.82-2.147-.084-.203-.356-1.027.074-2.13 0 0 .672-.215 2.2.82.64-.178 1.328-.268 2.01-.271.682.003 1.37.093 2.01.271 1.52-1.034 2.19-.82 2.19-.82.432 1.102.159 1.926.078 2.13.51.562.82 1.274.82 2.147 0 3.06-1.87 3.74-3.64 3.94.284.245.54.727.54 1.463v2.18c0 .214.148.464.558.388C13.71 14.54 16 11.54 16 8c0-4.42-3.58-8-8-8z"
                />
              </svg>
            </a>
            <a
              href="https://www.linkedin.com/in/wassim-rached-407994239"
              class="btn btn-outline-dark btn-sm ms-2"
              target="_blank"
              title="LinkedIn"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-linkedin"
                viewBox="0 0 448 512"
              >
                <path
                  d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </footer>

    <div>
      <!-- non displayed -->
      <video
        id="standby-video"
        style="display: none"
        playsinline
        autoplay
        loop
        muted
      >
        <source src="standBy.mp4" type="video/mp4" />
      </video>
    </div>
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const remoteVideo = new Plyr("#remote-video", {
          controls: ["volume", "fullscreen"],
        });
        const localVideo = new Plyr("#local-video", {
          controls: [],
        });
      });
    </script>
    <script
      src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"
      defer
    ></script>
    <script src="utils.js" defer></script>
    <script src="main.js" defer></script>
  </body>
</html>
